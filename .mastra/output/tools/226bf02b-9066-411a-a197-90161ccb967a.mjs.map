{"version":3,"file":"226bf02b-9066-411a-a197-90161ccb967a.mjs","sources":["../../../src/mastra/tools/site-audit-tool.ts"],"sourcesContent":["import { createTool } from \"@mastra/core/tools\";\nimport { z } from \"zod\";\n\nexport const siteAuditTool = createTool({\n  id: \"site-audit\",\n  description: \"Perform comprehensive technical SEO audit of a website\",\n  inputSchema: z.object({\n    url: z.string().url().describe(\"Website URL to audit\"),\n    includePerformance: z.boolean().default(true).describe(\"Include performance metrics\"),\n    includeMobile: z.boolean().default(true).describe(\"Include mobile-friendliness check\"),\n    includeAccessibility: z.boolean().default(true).describe(\"Include accessibility audit\"),\n    depth: z.enum([\"shallow\", \"medium\", \"deep\"]).default(\"medium\").describe(\"Audit depth\"),\n  }),\n  outputSchema: z.object({\n    overallScore: z.number().min(0).max(100).describe(\"Overall SEO health score\"),\n    technicalIssues: z.array(z.object({\n      severity: z.enum([\"critical\", \"high\", \"medium\", \"low\"]),\n      category: z.enum([\"performance\", \"mobile\", \"accessibility\", \"seo\", \"security\"]),\n      issue: z.string(),\n      description: z.string(),\n      recommendation: z.string(),\n      impact: z.string(),\n    })),\n    performanceMetrics: z.object({\n      loadTime: z.number().describe(\"Page load time in seconds\"),\n      firstContentfulPaint: z.number(),\n      largestContentfulPaint: z.number(),\n      cumulativeLayoutShift: z.number(),\n      firstInputDelay: z.number(),\n      score: z.number().min(0).max(100),\n    }),\n    mobileOptimization: z.object({\n      isMobileFriendly: z.boolean(),\n      viewportConfigured: z.boolean(),\n      textReadable: z.boolean(),\n      touchTargetsAppropriate: z.boolean(),\n      score: z.number().min(0).max(100),\n    }),\n    seoFactors: z.object({\n      hasMetaTitle: z.boolean(),\n      hasMetaDescription: z.boolean(),\n      hasH1Tag: z.boolean(),\n      hasStructuredData: z.boolean(),\n      hasRobotsTxt: z.boolean(),\n      hasSitemap: z.boolean(),\n      httpsEnabled: z.boolean(),\n      score: z.number().min(0).max(100),\n    }),\n    recommendations: z.array(z.object({\n      priority: z.enum([\"high\", \"medium\", \"low\"]),\n      category: z.string(),\n      title: z.string(),\n      description: z.string(),\n      estimatedImpact: z.enum([\"high\", \"medium\", \"low\"]),\n    })),\n    summary: z.object({\n      criticalIssues: z.number(),\n      highPriorityIssues: z.number(),\n      mediumPriorityIssues: z.number(),\n      lowPriorityIssues: z.number(),\n      estimatedFixTime: z.string(),\n    }),\n  }),\n  execute: async ({ context }) => {\n    const { url, includePerformance, includeMobile, includeAccessibility, depth } = context;\n\n    // Simulate comprehensive site audit\n    const auditResults = await performSiteAudit(url, {\n      includePerformance,\n      includeMobile,\n      includeAccessibility,\n      depth,\n    });\n\n    return auditResults;\n  },\n});\n\nasync function performSiteAudit(\n  url: string,\n  options: {\n    includePerformance: boolean;\n    includeMobile: boolean;\n    includeAccessibility: boolean;\n    depth: string;\n  }\n) {\n  // Simulate audit results (in production, this would use tools like Lighthouse, PageSpeed Insights, etc.)\n  \n  const technicalIssues = [\n    {\n      severity: \"critical\" as const,\n      category: \"performance\" as const,\n      issue: \"Large image files not optimized\",\n      description: \"Several images are larger than 1MB and not compressed\",\n      recommendation: \"Compress images and use modern formats like WebP\",\n      impact: \"Slow page loading affects user experience and rankings\",\n    },\n    {\n      severity: \"high\" as const,\n      category: \"seo\" as const,\n      issue: \"Missing meta descriptions\",\n      description: \"15 pages are missing meta descriptions\",\n      recommendation: \"Add unique, compelling meta descriptions to all pages\",\n      impact: \"Missing meta descriptions reduce click-through rates from search results\",\n    },\n    {\n      severity: \"medium\" as const,\n      category: \"mobile\" as const,\n      issue: \"Touch targets too small\",\n      description: \"Some buttons and links are smaller than 44px on mobile\",\n      recommendation: \"Increase touch target sizes to at least 44px\",\n      impact: \"Poor mobile usability affects mobile rankings\",\n    },\n  ];\n\n  const performanceMetrics = {\n    loadTime: 2.3 + Math.random() * 2,\n    firstContentfulPaint: 1.2 + Math.random(),\n    largestContentfulPaint: 2.1 + Math.random() * 2,\n    cumulativeLayoutShift: Math.random() * 0.3,\n    firstInputDelay: Math.random() * 100,\n    score: Math.floor(Math.random() * 40) + 60, // 60-100\n  };\n\n  const mobileOptimization = {\n    isMobileFriendly: Math.random() > 0.2,\n    viewportConfigured: Math.random() > 0.1,\n    textReadable: Math.random() > 0.15,\n    touchTargetsAppropriate: Math.random() > 0.3,\n    score: Math.floor(Math.random() * 30) + 70, // 70-100\n  };\n\n  const seoFactors = {\n    hasMetaTitle: Math.random() > 0.1,\n    hasMetaDescription: Math.random() > 0.2,\n    hasH1Tag: Math.random() > 0.15,\n    hasStructuredData: Math.random() > 0.4,\n    hasRobotsTxt: Math.random() > 0.2,\n    hasSitemap: Math.random() > 0.3,\n    httpsEnabled: Math.random() > 0.05,\n    score: Math.floor(Math.random() * 25) + 75, // 75-100\n  };\n\n  const recommendations = [\n    {\n      priority: \"high\" as const,\n      category: \"Performance\",\n      title: \"Optimize Core Web Vitals\",\n      description: \"Improve LCP, FID, and CLS scores to meet Google's Core Web Vitals thresholds\",\n      estimatedImpact: \"high\" as const,\n    },\n    {\n      priority: \"high\" as const,\n      category: \"SEO\",\n      title: \"Fix Missing Meta Tags\",\n      description: \"Add meta descriptions and optimize meta titles for better search visibility\",\n      estimatedImpact: \"medium\" as const,\n    },\n    {\n      priority: \"medium\" as const,\n      category: \"Mobile\",\n      title: \"Improve Mobile Usability\",\n      description: \"Ensure all interactive elements are properly sized for mobile devices\",\n      estimatedImpact: \"medium\" as const,\n    },\n    {\n      priority: \"medium\" as const,\n      category: \"Technical\",\n      title: \"Implement Structured Data\",\n      description: \"Add schema markup to improve rich snippet opportunities\",\n      estimatedImpact: \"low\" as const,\n    },\n  ];\n\n  const criticalCount = technicalIssues.filter(i => i.severity === \"critical\").length;\n  const highCount = technicalIssues.filter(i => i.severity === \"high\").length;\n  const mediumCount = technicalIssues.filter(i => i.severity === \"medium\").length;\n  const lowCount = technicalIssues.filter(i => i.severity === \"low\").length;\n\n  const overallScore = Math.round(\n    (performanceMetrics.score + mobileOptimization.score + seoFactors.score) / 3\n  );\n\n  return {\n    overallScore,\n    technicalIssues,\n    performanceMetrics,\n    mobileOptimization,\n    seoFactors,\n    recommendations,\n    summary: {\n      criticalIssues: criticalCount,\n      highPriorityIssues: highCount,\n      mediumPriorityIssues: mediumCount,\n      lowPriorityIssues: lowCount,\n      estimatedFixTime: `${criticalCount * 4 + highCount * 2 + mediumCount * 1}+ hours`,\n    },\n  };\n}\n"],"names":[],"mappings":"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"}